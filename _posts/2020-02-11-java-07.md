---
title: "자바 8 - 스트림 2"
date: 2020-02-09 12:58:00 -0400
categories: java
---

리덕션, 옵션 타입

### 목차
[1. 단순 리덕션](#1-단순-리덕션)<br>
<br><br>


## 1. 단순 리덕션

이전까지 스트림을 생성하고 변환하는 법을 알아 봤다면 여기서는 가장 중요한 부분인 스트림 데이터로부터 결과를 얻는 것이다. 여기서 다루는 메서드를 리덕션(reduction) 메서드라고 한다. 리덕션은 종료 연산(terminal operation)이다. 

리덕션 메서드는 스트림을 넌스트림(nonstream) 값으로 리듀스(reduce)한다.

앞에서 살펴 본 count 메서드가 단순한 리덕션 메서드이다. 다른 단순 리덕션 메서드로는 min과 max가 있다. 주의할 점은 이 메서드들은 Optional&lt;T&gt; 값으로 반환 한다는 것이다. Optional&lt;T&gt; 값은 결과를 감싸고 있거나 결과가 없음을 나타낸다. 이유는 스트림이 비어있을 수 있기 때문이다. null을 반환하면 널 포인터 에러가 발생할 수 있다. 다음은 스트림의 최댓값을 얻는 방법이다.

```java
String[] words = { "show", "me", "the", "money" };
Optional<String> largest = Stream.of(words).max(String::compareToIgnoreCase);
System.out.println("largest: " + largest.orElse(""));

// largetst: the
```

findFirst는 비어 있지 않은 컬렉션의 첫 번째 값을 반환한다. 이 메서드는 filter와 결합하면 유용하다. 예를 들어 's'로 시작하는 단어가 있다면 글자 's'로 시작하는 첫 번째 단어를 찾는다.

```java
String[] words = { "sara", "supreme", "money", "show" };
Optional<String> startWithS = Stream.of(words).filter( s -> s.startsWith("s")).findFirst();
System.out.println(startWithS.orElse(""));
// sara
```

첫 번째 값은 물론 어떤 일치된 결과든 괜찮을 때는 findAny 메서드를 사용한다. 이 메서드는 스트림을 병렬화할 때 효과적이다.

```java
String[] words = { "sara", "supreme", "money", "show" };
Optional<String> startWithS = Stream.of(words).parallel().filter( s -> s.startsWith("s")).findAny();
System.out.println(startWithS.orElse(""));

// sara, supreme, show 중 하나가 출력 됨
```

단순히 일치 요소가 알고 싶을 때는 anyMatch를 사용한다. 이 메서드는 predicate 인자를 받으므로 filter를 사용할 필요가 있다.

```java
boolean aWordStartWithS = Stream.of(words).parallel().anyMatch(s -> s.startsWith("s"));
System.out.println("s로 시작하나요? " + aWordStartWithS);
// s로 시작하나요? true
```
모든 요소가 predicate와 일치하면 true를 반환하는 allMatch, 아무것도 일치하지 않으면 true를 반환하는 noneMatch 메서드로 있다.



단순 리덕션 메서드 정리
- count
- max, min
- findFirst, findAny
- anyMatch, allMatch, noneMatch